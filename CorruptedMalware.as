package classes {

	import starling.events.Event;
	
	public class CorruptedMalware extends Combatant {

		public var idleMc:SuperMovieClip;
		public var movementMc:SuperMovieClip;
		public var meleeMc:SuperMovieClip;
		public var spawnMc:SuperMovieClip;
		
		public function CorruptedMalware(){

			idleMc = new SuperMovieClip('corruptedMalwareIdle', GV.BOSS1_SPRITESHEET);
			movementMc = new SuperMovieClip('corruptedMalwareMoving', GV.BOSS1_SPRITESHEET);
			meleeMc = new SuperMovieClip('corruptedMalwareMelee', GV.BOSS1_SPRITESHEET, -65);
			spawnMc = new SuperMovieClip('corruptedMalwareSpawning', GV.BOSS1_SPRITESHEET, -31);
			introMessage = introMessageRandomizer(new <String>["My existence pains me.", "Infection is purity.", "You look too clean.", "Kneel to your god."]);
			spawnMc.loop = false;

			meleeMc.addEventListener(Event.COMPLETE, moveBackToOurTile);
			spawnMc.addEventListener(Event.COMPLETE, uniqueIdleAnimation);
		}

		public function uniqueAi():void{
			movementAI();
			attackAI();
			if(hp/maxHp < 0.9999){
				startAbility(slots[GREEN]);
			}
		}

		public function uniqueRunAfterInit(){
			FX.squish2.play(GV.AUDIO_START_TIME, 0, GV.sfx);
			FX.showParticleEffect(FX.corruptSlimeySplashPool, x, y, 0.1);
			changeAnimation(spawnMc);
		}

		public function uniqueNullItAll():void{
			superNull(idleMc); idleMc = null;
			superNull(movementMc); movementMc = null;
			superNull(meleeMc); meleeMc = null;
			superNull(spawnMc); spawnMc = null;
		}
		
		public function uniqueMoveSoundPlay():void{FX.playSlimeMove();}
		public function uniqueMoveSoundStop():void{FX.stopSlimeMove();}
		public function uniqueMovementAnimation():void{ if(GV.arena.inAction) changeAnimation(movementMc);}
		public function uniqueIdleAnimation():void{changeAnimation(idleMc);}
		public function meleeAnimation():void{changeAnimation(meleeMc); FX.squish1.play(GV.AUDIO_START_TIME, 0, GV.sfx);}
		public function selfDestructAnimation():void{
			FX.showExplosion(x, y, 0.1);
			hp = 0;
			executeEffects();
		}
	}
}
